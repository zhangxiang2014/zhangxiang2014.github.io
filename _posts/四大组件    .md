##在小米一年
来小米一年了，这一年我到底做了什么，学会了什么？
做的东西不多，改版了病毒扫描，合并了病毒扫描，接手改版了好几次游戏加速并重构了游戏加速的服务。
上述都是在app层的东西，
学习的过程呢？   

### 四大组件    

这是android抽象了底层的服务封装成的简单易用的几个东西，我们分别看看这几个组件能干什么？    

- activity:活动组件    

>提供给用户可视化的界面，处理view的展示，这里我们离不开xml,通常使用setContentView()的方式使得当前activity关联到一个xml对应的视图中。xml实际上就是一个viewGroup,安卓采用深度优先遍历的方式来遍历每一层的view，view通常会经历三个过程measure(测量),layout,draw(绘制)，这里面每一步的过程都会影响到从绘制到展示的时间，比如match_parent和wrap_content这两个属性就是个不同的过程，relativelayout和linearlayout一样是一个不同的过程。讲到view的绘制，view还有一个东西叫做事件分发，从触摸屏幕到手指离开屏幕会经历几个过程，onTouchEvent(), dispatchTouchEvent(), onInterceptTouchEvent(),实际上是一个V形的过程，而触摸这个事件又有几个步骤，action_down,action_move,action_up,我们在上述几个过程中返回的true或false直接会影响到事件分发的流程，我们又通常会依据触摸行为的不同来设计不同的逻辑来更新ui或者绘制动画。讲到动画又是一个很有意思的事情，动画其实就是在更新一个view属性的状态，所以你只要拿到一个view，你可以对它做任何你想做的事情，而安卓又很体贴的提供了属性动画这个东西来帮助你去定义一个view属性的动画过程。但是使用属性动画的过程并不是一种高级的方式，我觉得更高级的方式的是在onDraw方法里面自己去绘制图形，你可以定义一个定时器来更新图像（通常你看那些漂亮酷炫的带动画效果的view就是这种复写ondraw方法的自定义view）。同时我们需要有一个概念，activity更新ui的操作一定是在主线程（mainThread）,安卓生命周期的回调均在主线程，哦对，需要熟知activity的生命周期，因为它是四大组件里面生命周期最复杂的，比他更复杂的是fragment，但是需要依附于activity。我们常说的不要阻塞主线程实际上是在告诉我们把耗时的操作异步执行，什么是耗时操作？读写文件，访问数据库，复杂的逻辑处理，网络操作，安卓提供了asynctask来帮助我们来处理异步的流程，实质上的内部实现是一个threadPool,线程池是java里面的概念，是帮助我们减少thread创建浪费资源的工具，线程池可以很好的帮助我们管理调度线程而不需要花费太多资源，我们可以根据cpu的线程来配置自己所需要的线程池。我们也可以用更轻量级可控的方式handler来post一个runnable，这个可控体现在我们可以指定事件发生的时间，我们可以在不需要的时候来remove这个操作，而一旦涉及到thread我们就不得不提多线程的处理，锁的使用。讲到定时安卓也提供了定时器的工具帮助我们完成一些定时的工作，然而安卓更是提供了系统级别的事件触发工具jobScheuler来完成我们预设的任务，这个任务是系统级别的可以唤醒进程的操作。